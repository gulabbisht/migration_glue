id: user_xml_migrate
label: 'User XML Migrate'
migration_group: default
source:
  plugin: url
  data_parser_plugin: xml
  data_fetcher_plugin: file
  urls: modules/migration_glue/modules/examples/xml_migrate/data/users.xml
  item_selector: /document/user
  fields:
    -
      selector: /document/user
      label: /document/user
      name: /document/user
    -
      selector: id
      label: id
      name: id
    -
      selector: email
      label: email
      name: email
    -
      selector: username
      label: username
      name: username
    -
      selector: fullname
      label: fullname
      name: fullname
    -
      selector: created
      label: created
      name: created
    -
      selector: updated
      label: updated
      name: updated
    -
      selector: status
      label: status
      name: status
    -
      selector: picture
      label: picture
      name: picture
    -
      selector: language
      label: language
      name: language
  ids:
    username:
      type: string
process:
  user_picture:
    plugin: image_import
    source: picture
    destination: 'public://images/'
    title: ''
    alt: ''
    height: ''
    width: ''
  name: username
  created:
    plugin: callback
    callable: strtotime
    source: created
  status: status
  mail: email
  langcode: language
destination:
  plugin: 'entity:user'
  md5_passwords: true
dependencies:
  enforced:
    module:
      - migration_mapper
